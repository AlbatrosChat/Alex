<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALEX - Accounting System</title>
    
    <link rel="icon" type="image/jpg" href="https://i.ibb.co/zW2390sJ/IMG-20260127-113253.jpg">
    <link rel="apple-touch-icon" href="https://i.ibb.co/zW2390sJ/IMG-20260127-113253.jpg">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --navy: #0f172a; --emerald: #10b981; --slate: #f1f5f9; --danger: #ef4444; --warning: #f59e0b; --indigo: #6366f1; }
        body { margin: 0; font-family: 'Segoe UI', Roboto, sans-serif; background: var(--slate); color: #1e293b; padding-bottom: 20px; }

        .notification-toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px); background: white; padding: 15px 25px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); z-index: 10001; transition: 0.5s; display: flex; align-items: center; gap: 12px; font-weight: bold; border-right: 5px solid var(--emerald); text-align: center; line-height: 1.4; }
        .notification-toast.show { transform: translateX(-50%) translateY(0); }

        #loginScreen { position: fixed; inset: 0; background: radial-gradient(circle at center, #111, #000); display: flex; align-items: center; justify-content: center; z-index: 9999; flex-direction: column; }
        .login-card { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); padding: 40px 30px; border-radius: 30px; width: 340px; text-align: center; border: 1px solid rgba(16, 185, 129, 0.2); }
        
        .custom-select-login { background: #1a1a1a; border: 1px solid var(--emerald); color: white; margin-bottom: 15px; padding: 12px; border-radius: 12px; width: 100%; font-size: 1rem; cursor: pointer; outline: none; appearance: none; text-align: center; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2310b981'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: left 12px center; background-size: 18px; }

        .login-card input { background: #1a1a1a; border: 1px solid #333; color: white; margin-bottom: 20px; text-align: center; padding: 14px; border-radius: 12px; width: 100%; box-sizing: border-box; font-size: 1rem; }
        .login-logo-container { width: 110px; height: 110px; margin: 0 auto 25px; border-radius: 50%; border: 2px solid var(--emerald); overflow: hidden; background: #000; }
        .login-logo-container img { width: 100%; height: 100%; object-fit: cover; }

        header { background: var(--navy); color: white; padding: 12px 18px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; border-bottom: 3px solid var(--emerald); }
        .header-logo { width: 42px; height: 42px; border-radius: 50%; border: 1px solid var(--emerald); overflow: hidden; }
        .header-logo img { width: 100%; height: 100%; object-fit: cover; }
        
        .user-pill { background: rgba(16, 185, 129, 0.15); border: 1px solid var(--emerald); padding: 6px 16px; border-radius: 20px; font-weight: bold; font-size: 0.95rem; color: #fff; position: absolute; left: 50%; transform: translateX(-50%); }

        .dropdown { position: relative; }
        .drop-content { display: none; position: absolute; left: 0; background: white; min-width: 240px; box-shadow: 0 15px 35px rgba(0,0,0,0.2); border-radius: 15px; z-index: 2000; overflow: hidden; border: 1px solid #eee; }
        .drop-content button, .drop-content a { width: 100%; padding: 15px; border: none; background: none; text-align: right; cursor: pointer; border-bottom: 1px solid #f1f5f9; display: flex; align-items: center; gap: 12px; font-size: 0.95rem; color: #333; text-decoration: none; box-sizing: border-box; }
        .show { display: block !important; }

        .container { max-width: 1000px; margin: 20px auto; padding: 0 15px; }
        .card { background: white; padding: 22px; border-radius: 18px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); margin-bottom: 20px; border: 1px solid #eee; }
        
        .input-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin-bottom: 15px; }
        input, select { padding: 12px; border: 1px solid #cbd5e1; border-radius: 10px; font-size: 0.95rem; outline: none; transition: 0.2s; }
        
        .btn-main { background: var(--emerald); color: white; border: none; padding: 14px; border-radius: 12px; cursor: pointer; width: 100%; font-weight: bold; display: flex; justify-content: center; align-items: center; gap: 8px; font-size: 1rem; transition: 0.3s; }
        .btn-main:active { transform: scale(0.96); opacity: 0.9; }

        .total-box { display: flex; justify-content: space-around; background: var(--navy); color: white; padding: 22px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .total-val { font-size: 1.4rem; font-weight: 800; display: block; color: var(--emerald); margin-top: 5px; }
        
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 650px; }
        th { background: #f8fafc; padding: 16px; text-align: right; color: #64748b; font-size: 0.85rem; border-bottom: 2px solid #edf2f7; }
        td { padding: 14px 16px; border-bottom: 1px solid #f1f5f9; font-size: 0.92rem; }

        .hidden { display: none !important; }
        .whatsapp-link { color: #25d366 !important; font-weight: bold; }
        
        /* Ø´ÙƒÙ„ Ù‚Ø³Ù… Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ */
        #sectionBackup { text-align: center; }
        .backup-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
    </style>
</head>
<body>

<div id="alexToast" class="notification-toast"></div>

<div id="loginScreen">
    <div class="login-card">
        <div class="login-logo-container"><img src="https://i.ibb.co/zW2390sJ/IMG-20260127-113253.jpg"></div>
        <select id="uIn" class="custom-select-login">
            <option value="Ali">ğŸ‘‘ Ø§Ù„Ù…Ø¯ÙŠØ±: Ali</option>
            <optgroup label="Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ†">
                <option value="A1">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A1</option><option value="A2">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A2</option>
                <option value="A3">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A3</option><option value="A4">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A4</option>
                <option value="A5">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A5</option><option value="A6">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A6</option>
                <option value="A7">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A7</option><option value="A8">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A8</option>
                <option value="A9">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A9</option><option value="A10">ğŸŒ± Ø§Ù„Ù…ÙˆØ¸Ù: A10</option>
            </optgroup>
        </select>
        <input type="password" id="pIn" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button class="btn-main" onclick="auth.login()">Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…</button>
    </div>
    <div style="color: #555; margin-top: 20px; font-size: 0.8rem;">ALEX Accounting System Â© 2026ğŸŒ±</div>
</div>

<div id="app" class="hidden">
    <header>
        <div class="header-logo"><img src="https://i.ibb.co/zW2390sJ/IMG-20260127-113253.jpg"></div>
        <div class="user-pill" id="activeUserLabel"></div>
        <div class="dropdown">
            <button onclick="ui.toggleMenu()" style="background:none; border:1px solid #444; color:white; padding:7px 14px; border-radius:10px; cursor:pointer;"><i class="fas fa-bars"></i></button>
            <div id="dropMenu" class="drop-content">
                <button onclick="ui.view('entry')"><i class="fas fa-plus-circle" style="color:var(--emerald)"></i> Ø¥Ø¶Ø§ÙØ© Ø­Ø±ÙƒØ©</button>
                <button onclick="ui.view('monthly')"><i class="fas fa-chart-pie" style="color:var(--indigo)"></i> Ø§Ù„Ø¬Ø±Ø¯ ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
                <div id="ownerOnly" class="hidden">
                    <button onclick="ui.view('staff')"><i class="fas fa-user-shield"></i> Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</button>
                    <button onclick="ui.view('backup')"><i class="fas fa-database" style="color:var(--warning)"></i> Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©</button>
                </div>
                <button onclick="admin.exportExcel()"><i class="fas fa-file-excel" style="color:#16a34a"></i> ØªØµØ¯ÙŠØ± Ø¥ÙƒØ³Ù„</button>
                <a href="https://wa.me/963988668481" target="_blank" class="whatsapp-link"><i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨</a>
                <button onclick="auth.logout()" style="color:var(--danger)"><i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </header>

    <div class="container">
        <div id="sectionEntry" class="card">
            <div class="input-grid">
                <div><label style="font-size:0.75rem; color:#64748b">Ø§Ù„ØªØ§Ø±ÙŠØ®</label><input type="date" id="inDate"></div>
                <div><label style="font-size:0.75rem; color:#64748b">Ø§Ù„ÙˆÙ‚Øª</label><input type="time" id="inTime"></div>
            </div>
            <div class="input-grid">
                <input type="text" id="inSyp" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº SYP" oninput="ui.format(this)">
                <input type="text" id="inUsd" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº USD" oninput="ui.format(this)">
                <input type="text" id="inNote" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ø­Ø±ÙƒØ©...">
            </div>
            <button class="btn-main" id="saveBtn" onclick="core.save()">Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</button>
        </div>

        <div id="sectionBackup" class="card hidden">
            <h3>Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙˆØ§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© ğŸ›¡ï¸</h3>
            <p style="font-size: 0.85rem; color: #64748b;">Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù„Ø­Ù…Ø§ÙŠØ© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ù† Ø§Ù„Ø­Ø°Ù Ø¹Ù†Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ØªØµÙØ­.</p>
            <div class="backup-btns">
                <button class="btn-main" onclick="admin.downloadBackup()" style="background:var(--navy)">
                    <i class="fas fa-download"></i> ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø©
                </button>
                <button class="btn-main" onclick="document.getElementById('importFile').click()" style="background:var(--indigo)">
                    <i class="fas fa-upload"></i> Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù†Ø³Ø®Ø©
                </button>
                <input type="file" id="importFile" class="hidden" accept=".json" onchange="admin.restoreBackup(event)">
            </div>
        </div>

        <div id="sectionMonthly" class="card hidden">
            <div class="input-grid" style="grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));">
                <select id="filterMonth">
                    <option value="1">ÙŠÙ†Ø§ÙŠØ±</option><option value="2">ÙØ¨Ø±Ø§ÙŠØ±</option><option value="3">Ù…Ø§Ø±Ø³</option><option value="4">Ø£Ø¨Ø±ÙŠÙ„</option><option value="5">Ù…Ø§ÙŠÙˆ</option><option value="6">ÙŠÙˆÙ†ÙŠÙˆ</option><option value="7">ÙŠÙˆÙ„ÙŠÙˆ</option><option value="8">Ø£ØºØ³Ø·Ø³</option><option value="9">Ø³Ø¨ØªÙ…Ø¨Ø±</option><option value="10">Ø£ÙƒØªÙˆØ¨Ø±</option><option value="11">Ù†ÙˆÙÙ…Ø¨Ø±</option><option value="12">Ø¯ÙŠØ³Ù…Ø¨Ø±</option>
                </select>
                <input type="number" id="filterYear" value="2026">
                <button class="btn-main" onclick="core.render()" style="background:var(--navy)">Ø¹Ø±Ø¶</button>
            </div>
        </div>

        <div id="sectionStaff" class="card hidden">
            <h3 style="margin-top:0">Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ğŸŒ±</h3>
            <div id="staffListArea"></div>
        </div>

        <div class="total-box">
            <div style="text-align:center">SYP<span class="total-val" id="totalSyp">0</span></div>
            <div style="text-align:center">USD<span class="total-val" id="totalUsd" style="color:#60a5fa">0</span></div>
        </div>

        <div class="card" style="padding:0; overflow:hidden">
            <div id="tableLabel" style="padding:18px; font-weight:bold; background:#fafafa; border-bottom:1px solid #eee"></div>
            <div class="table-container">
                <table>
                    <thead><tr><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„ÙˆÙ‚Øª</th><th>SYP</th><th>USD</th><th>Ø§Ù„Ø¨ÙŠØ§Ù†</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr></thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
let CUR_USER = ""; let VIEWING_USER = ""; let CURRENT_VIEW = 'entry'; let EDIT_ID = null; const MASTER = "Ali";
const defaultUsers = [{u:"Ali", p:"8899"},{u:"A1", p:"0188"},{u:"A2", p:"0288"},{u:"A3", p:"0388"},{u:"A4", p:"0488"},{u:"A5", p:"0588"},{u:"A6", p:"0688"},{u:"A7", p:"0788"},{u:"A8", p:"0888"},{u:"A9", p:"0988"},{u:"A10", p:"1088"}];

const db = {
    tx: () => JSON.parse(localStorage.getItem('alex_db_v15') || '[]'),
    save: (d) => localStorage.setItem('alex_db_v15', JSON.stringify(d)),
    users: () => JSON.parse(localStorage.getItem('alex_users_v15')) || defaultUsers,
    setS: (u) => localStorage.setItem('alex_sess_v15', u),
    getS: () => localStorage.getItem('alex_sess_v15'),
    clearS: () => localStorage.removeItem('alex_sess_v15')
};

const ui = {
    showToast: (msg) => {
        const t = document.getElementById('alexToast');
        t.innerHTML = msg.replace(/\n/g, '<br>');
        t.className = 'notification-toast show'; 
        setTimeout(() => t.className = 'notification-toast', 3500);
    },
    toggleMenu: () => document.getElementById('dropMenu').classList.toggle('show'),
    view: (v) => {
        CURRENT_VIEW = v;
        document.getElementById('sectionEntry').classList.toggle('hidden', v !== 'entry');
        document.getElementById('sectionMonthly').classList.toggle('hidden', v !== 'monthly');
        document.getElementById('sectionStaff').classList.toggle('hidden', v !== 'staff');
        document.getElementById('sectionBackup').classList.toggle('hidden', v !== 'backup');
        if(v === 'staff') admin.renderStaffList();
        document.getElementById('dropMenu').classList.remove('show');
        core.render();
    },
    reset: () => {
        document.getElementById('inSyp').value = ""; document.getElementById('inUsd').value = ""; document.getElementById('inNote').value = "";
        const n = new Date(); document.getElementById('inDate').value = n.toLocaleDateString('en-CA'); document.getElementById('inTime').value = n.toTimeString().substring(0,5);
        document.getElementById('saveBtn').innerText = "Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©"; EDIT_ID = null;
    },
    format: (i) => { let v = i.value.replace(/\D/g, ""); i.value = v ? Number(v).toLocaleString() : ""; }
};

const auth = {
    login: () => {
        const u = document.getElementById('uIn').value; const p = document.getElementById('pIn').value;
        const user = db.users().find(x => x.u === u && x.p === p);
        if(user) { 
            CUR_USER = u; VIEWING_USER = u; db.setS(u); auth.launch(); 
        } else {
            ui.showToast("âŒ ØªØ³Ø¬ÙŠÙ„ ØºÙŠØ± Ù…ØµØ±Ø­\nğŸŒšÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙ„Ø·");
        }
    },
    launch: () => {
        document.getElementById('loginScreen').classList.add('hidden'); 
        document.getElementById('app').classList.remove('hidden');
        document.getElementById('activeUserLabel').innerText = (CUR_USER === MASTER) ? `ğŸ‘‘ ${CUR_USER}` : `ğŸŒ± ${CUR_USER}`;
        if(CUR_USER === MASTER) document.getElementById('ownerOnly').classList.remove('hidden');
        ui.reset(); core.render();
    },
    logout: () => { db.clearS(); location.reload(); }
};

const core = {
    save: () => {
        const syp = Number(document.getElementById('inSyp').value.replace(/,/g, ''));
        const usd = Number(document.getElementById('inUsd').value.replace(/,/g, ''));
        const note = document.getElementById('inNote').value;
        const dVal = document.getElementById('inDate').value;
        if(!syp && !usd) return ui.showToast("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº");
        
        let all = db.tx(); const dObj = new Date(dVal);
        const entry = { id: EDIT_ID || Date.now(), user: CUR_USER, syp, usd, note, date: dVal, time: document.getElementById('inTime').value, month: dObj.getMonth()+1, year: dObj.getFullYear() };
        
        if(EDIT_ID) { all = all.map(x => x.id === EDIT_ID ? entry : x); ui.showToast("ğŸ›¡ï¸ ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«"); }
        else { all.push(entry); ui.showToast("âš”ï¸ ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„"); }
        db.save(all); ui.reset(); core.render();
    },
    render: () => {
        const all = db.tx(); const body = document.getElementById('tableBody'); const today = new Date().toLocaleDateString('en-CA');
        let filtered = (CURRENT_VIEW === 'entry' || CURRENT_VIEW === 'backup') ? all.filter(x => x.user === VIEWING_USER && x.date === today) : all.filter(x => x.user === VIEWING_USER && x.month === parseInt(document.getElementById('filterMonth').value) && x.year === parseInt(document.getElementById('filterYear').value));
        document.getElementById('tableLabel').innerText = (CURRENT_VIEW === 'entry') ? "Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…" : `Ø£Ø±Ø´ÙŠÙ ${VIEWING_USER}`;
        let ts = 0, tu = 0; body.innerHTML = "";
        filtered.sort((a,b) => b.id - a.id).forEach(x => {
            ts += x.syp; tu += x.usd;
            body.innerHTML += `<tr><td>${x.date}</td><td>${x.time}</td><td style="font-weight:bold">${x.syp.toLocaleString()}</td><td style="color:var(--indigo); font-weight:bold">${x.usd.toLocaleString()}</td><td>${x.note}</td><td><button style="border:none; background:none; color:var(--warning)" onclick="core.edit(${x.id})"><i class="fas fa-edit"></i></button><button style="border:none; background:none; color:var(--danger); margin-right:5px" onclick="core.del(${x.id})"><i class="fas fa-trash"></i></button></td></tr>`;
        });
        document.getElementById('totalSyp').innerText = ts.toLocaleString(); document.getElementById('totalUsd').innerText = tu.toLocaleString();
    },
    edit: (id) => {
        const item = db.tx().find(x => x.id === id); EDIT_ID = id;
        document.getElementById('inSyp').value = item.syp.toLocaleString(); document.getElementById('inUsd').value = item.usd.toLocaleString();
        document.getElementById('inNote').value = item.note; document.getElementById('inDate').value = item.date; ui.view('entry');
        document.getElementById('saveBtn').innerText = "ØªØ¹Ø¯ÙŠÙ„ ÙˆØ­ÙØ¸";
    },
    del: (id) => { if(confirm("Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠØŸ")) { db.save(db.tx().filter(x => x.id !== id)); ui.showToast("ØªÙ… Ø§Ù„Ø­Ø°Ù"); core.render(); } }
};

const admin = {
    renderStaffList: () => {
        const area = document.getElementById('staffListArea'); area.innerHTML = "";
        db.users().forEach(u => { 
            area.innerHTML += `<div style="padding:15px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center"><span>${u.u} ${(u.u===MASTER)?'ğŸ‘‘':'ğŸŒ±'}</span><button onclick="admin.viewS('${u.u}')" style="color:var(--indigo); background:none; border:1px solid var(--indigo); border-radius:8px; padding:6px 15px; cursor:pointer">Ø¬Ø±Ø¯ Ø§Ù„Ø­Ø³Ø§Ø¨</button></div>`; 
        });
    },
    viewS: (u) => { VIEWING_USER = u; ui.view('monthly'); },
    exportExcel: () => {
        const data = db.tx().map(x => ({ "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…": x.user, "Ø§Ù„ØªØ§Ø±ÙŠØ®": x.date, "SYP": x.syp, "USD": x.usd, "Ø§Ù„Ø¨ÙŠØ§Ù†": x.note }));
        const ws = XLSX.utils.json_to_sheet(data); const wb = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(wb, ws, "AlexReport"); XLSX.writeFile(wb, `ALEX_Report_${new Date().toLocaleDateString()}.xlsx`);
    },
    // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    downloadBackup: () => {
        const data = JSON.stringify(db.tx());
        const blob = new Blob([data], {type: 'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `ALEX_Backup_${new Date().toLocaleDateString()}.json`;
        a.click();
        ui.showToast("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ù…Ø§Ù†");
    },
    restoreBackup: (event) => {
        const file = event.target.files[0];
        if(!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            try {
                const importedData = JSON.parse(e.target.resul
